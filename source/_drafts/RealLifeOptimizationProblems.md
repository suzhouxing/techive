# NP问题

## 天线布局设计
Antenna Layout Design

### 抽象描述

已知有若干矩形原料的长宽尺寸和价格, 以及若干矩形产品在不同原料上的长宽尺寸.
要求将产品无重叠地布局到原料上, 使所用原料的总价格最小.
其中某些产品不能使用某些原料生产.


### 应用场景

使用若干种不同规格的印制电路板生产多种不同的天线.
任意两个天线在同一块印制电路板水平面上的投影不能重叠, 且要留出一定间距 (保证切割时天线不受损).
不同规格的印制电路板长宽高尺寸不同, 层数不同, 材料不同, 价格不同.
某些天线不能使用某些规格的印制电路板生产 (可能因为印制电路板层数不够等).
同一天线在不同规格的印制电路板上的大小可能不同 (保证满足天线的性能指标, 但印制电路板的材料不同导致介电常数不同).


## 拓扑图可视化
Graph Visualization
Network Visualization
Topology Visualization

### 抽象描述

将拓扑图转换为 $2$ 维或 $3$ 维的几何图, 使生成的几何图尽可能地满足拓扑图中的节点的距离关系, 或者边交叉尽可能少.
对于几何距离远于拓扑距离的节点对, 采用作用力较小的弹性模型 (胡克定律) 将其收拢, 防止节点分布无限扩散.
对于几何距离近于拓扑距离的节点对, 采用作用力较大的静电斥力模型 (库伦定律) 将其弹开, 防止节点分布坍缩.
每条边可以有拓扑距离控制理想情况下的几何距离, 也可以有权重控制不满足拓扑距离时的惩罚系数.
节点也可以有权重控制不满足拓扑距离时的惩罚系数.

### 扩展

* 边的交叉尽可能少.
* 给定参考坐标, 避免与参考坐标相差过大的解.


## 带必经点集的最短路径
Shortest Path with Essential Node Groups

### 抽象描述

已知一个拓扑图 $G (V, E)$ , 若干个必经点集 $G_i \in V$.
要求给出一条从起点到终点的最短路径, 同时保证每个必经点集中至少有一个节点被访问.

### 应用场景

* 网络中必经一个设备可以转换为经过该设备的任意一个端口.

### 扩展

* 所求路径必须为简单路径.
* 每个必经点集有且仅有一个节点被访问.


## 带互斥点集的最短路径
Shortest Path with Mutually Exclusive Node Groups

### 抽象描述

已知一个拓扑图 $G (V, E)$ , 若干个互斥点集 $G_i \in V$.
要求给出一条从起点到终点的最短路径, 同时保证每个互斥点集中至多有一个节点被访问.

### 应用场景

* 网络中一条业务不能从不同端口重复经过一个设备.

### 扩展

* 每个互斥点集中至多有 k 个节点被访问.
* 每个互斥点集仅能被访问一次
  * 假设 $v \in G_i, u \notin G_i$, 访问一次 $G_i$ 即路径中出现正则表达式 `u(v+)u` 的模式.

### 朴素解法

* 先松弛互斥约束计算最短路.
* 对每个不满足互斥要求的点集进行分支.
  * **方案1** 不允许经过点集中的某个节点.
  * **方案2** 仅允许经过点集中的一个节点而不允许经过所有其他节点, 即保证点集只会被访问一次.
* 如果找到一条没有违反互斥约束的最短路则到达搜索树的叶子.
* 所有叶子中的最优解即为原问题的最优解.


## 带资源约束的最短路径
Resource Constrained Shortest Path with Relay
Shortest Path with Fuel Constraint and Variable Refueling
Shortest Path with Energy Constraint and Variable Recharging

### 抽象描述

已知一个拓扑图 $G (V, E)$, 若干加油站 $R_i \in V$, 每条边上的时间开销和油耗, 车辆的初始油量与油箱容量.
如果访问加油站, 车辆的油箱将被加满.
要求给出一条从起点到终点的时间最短的路径, 同时保证车辆剩余油量大于 $0$.

### 应用场景

* 电池容量较小的电动汽车长途旅行或者汽车拉力赛的充电或加油规划.
* 由于能量衰减与噪声干扰的存在, 光信号在光纤中传输一定距离需要使用中继补偿.

### 扩展

* 所求路径必须为简单路径.
* 每条边上的油耗不是常量, 而是与剩余油量线形相关的的函数, 且要决定经过加油站时的加油量.


## 带时间约束的最短路径
Shortest Path with Layover

### 抽象描述

已知一个拓扑图 $G (V, E)$, 若干休息区 $R_i \in V$, 每条边上的时间开销和油耗.
司机每驾驶一段时间必须停车休息一段时间, 将连续驾驶时间清零.
要求给出一条从起点到终点的耗油最少的路径, 同时保证司机不会疲劳驾驶.

### 应用场景

* 车辆路由问题中司机需要遵守交通规则不能长途疲劳驾驶.

### 扩展

* 每次停车休息有额外开销.
* 停车休息必须在任意节点上.
* 停车休息必须在休息区 (部分节点).
* 仅在路径上有休息区时可以在任意位置停车休息一次.
* 所求路径必须为简单路径.
* 休息时间为与连续驾驶时间相关的 (分段线性) 函数.
* 旅程的总时间不能超过给定上限.


## 带容量约束的节点覆盖

### 抽象描述

给定一个拓扑图, 有一个客户节点的集合, 每个节点有给定的需求量 (消耗速率).
有一个服务设备类型的集合, 每种设备有固定的成本和容量 (生产速率).
有一个服务节点的集合, 每个节点支持安装若干种服务设备类型.
每个客户一定由距其前 k 近的某一个服务节点服务.
要求为每个中心安装不超过一个服务设备, 并为客户指定一个服务节点, 保证客户的需求得到满足, 同时设备架设成本最小.

### 扩展

* 最小化客户到服务节点的平均/最远距离.
* 每个客户的需求量在前 $k$ 近的服务节点中按一定比例均摊, 而不是确定地由一个节点服务.
* 每个客户包含一系列节点 (客户的出行路线), 前 $k$ 近的选取条件变为考虑到该节点集合中任一点的距离.



# 复杂度未知的问题

## 放置问题
Placement Problem

### 抽象描述

已知一个整数区间 [0, L), 要将若干个点放置到该区间中, 即确定第 $i$ 个点的坐标 $x_{i}$.
每个点 $i$ 的第 $j$ 个可放置区间为 $[b_{ij}, e_{ij})$.
任意两点 $i$ 在前 $j$ 在后相邻放置时的最小间距为 $G_{ij}$, 代价为 $C_{ij}$.
求满足要求的代价最小的放置方案.

### 应用场景

* 寻找一条依次访问若干节点的路径, 每个节点有时间窗, 同时两个节点间的最小耗时已知, 求一条合法路径.

### 扩展

* 待放置的点顺序已确定.
* 优化目标改为 $p \cdot \max\limits_{i} x_{i} + p' \cdot \min\limits_{i} x_{i}$.


## 符号分配问题

### 抽象描述

一篇论文中有 $N$ 个符号, 每个符号 $s$ 分别出现了 $A_s$ 次.
每个符号 $s$ 都有一个单词列表 $O_s$, 如果 s 与其他符号的单词重复, 应从 $O_s$ 中选择一个其他的单词.
每次使用第 $i$ 个单词需要受到权重 $P_{si}$ 的惩罚/奖励, 每个符号在不同的地方出现时必须使用相同的单词.
要求总惩罚最小/总奖励最大.

### 扩展

* 给定一个分配方案, 要求重合度尽可能高.


## 数据恢复

已知一个数据块内的数据, 已知其存储结构 (例如 FAT32/NTFS/EXT4), 根据残留索引项中的指向关系 (如数据块的偏移量) 重建文件索引.


## 多阶段火力控制问题
Weapon Target Assignment

场景信息:
双方武器射程, 攻击力, 攻击频率
双方作战单位防御力, 移动速度
武器与其装载单位的映射关系

每个阶段输入:
我方武器可用性列表
敌方有效作战单位列表
双方作战单位相对位置

每阶段输出:
攻击映射关系
作战单位移动策略

模拟器工作:
根据攻击频率, 攻击力防御力和双方攻击映射关系设置武器可用性


## 车票预售问题

现在的车票预售方案: 按区间预留 + 售票时确定座位.
可能出现各段都有空座位但是没有一个座位全程都空闲.
要是能不在购票时确定席位直接按人数购票, 然后在发车前1小时用算法动态调整座位, 来消除各段都有空座位但是没有一个座位全程都空闲的情况, 同时还可以优化想坐在一起的人的座位. 最后在候车厅检票进站刷身份证时显示自己的座位号.


## 最优匹配问题

每个人有一个优先级队列, 从最想要的到最不想要的依次排列. 每个人最多只能匹配一个对象, 求最优匹配.
即如果每个人最终匹配到了第i想要的对象, 使所有 $i$ 之和最小.


## 水库分洪问题

沿江有 $N$ 个水库将其分割为 $N+1$ 个流域, 通过控制各水库的蓄洪与泄洪最小化洪水带来的损失.
已知: 江源头出水量; 每个水库的初始蓄水量和最大蓄水量;
每个流域的降水量, 吸收量/率 (土壤渗透和人类用水), 排水量 (排入对应水库), 安全蓄水量, 超出安全蓄水量的单位损失 (分段线性函数).
约束: 水库不得超出最大蓄水量.
目标: 最小化各流域的损失之和
决策: 各水库的泄洪量

说明: 水源 O------]-------]-------]------> 海洋
? 每个水库的进水量 = 上游水库排水量 + 流域降水量 - 流域吸收量
? 每个水库的进水量 = (上游水库排水量 + 流域降水量) * (1 - 流域吸收率)

扩展: 将源头出水量转化为产水速率, 降水量转化为与时间相关的函数, 将吸收量和排水量转化为吸收速率和排水速率,
使问题变为一个与时间相关的, 根据天气预报变化而变化的多阶段问题.


## 动态列车时刻表

所有计划出行的乘客提前给定预期出行时间区间及各区间的优先级.
系统于每天 18 时确定下一天的初始时刻表, 之后乘客出行计划可能发生变更或取消, 或者有新增乘客.
根据变化增量调整时刻表, 新增车次, 取消空车, 取消乘客较少的车次并为相关乘客安排其他车次并予以提升舱位等级或者现金赔偿.



# P问题

## 波长分配

### 抽象描述

一条路径上每段链路有一个支持的波长集合, 要求为每段链路在各自的集合中选择一个波长, 使路径上变波长的次数最少.
变波长即第i段链路上使用的波长与第 $i+1$ 段链路上使用的波长不同.

### 解法

将每段链路的波长集中每个波长抽象成一个节点, 对于每对相邻的链路, 前驱链路的每个波长到后继链路的每个波长均有一条有向边.
波长相同的节点之间的有向边权重为 $0$, 不同的权重为 $1$.
在转换后的拓扑图中添加虚起点和虚终点,
虚起点到原路径上的起点的每个波长之间有一条权重为 $0$ 的有向边, 原路径上的终点的每个波长到虚终点之间有一条权重为 $0$ 的有向边.
则问题转换为寻找从虚起点到虚终点之间的最短路径的问题, 是经典的多段图动态规划.


## 带通道匹配约束的最短路径
Shortest Path with Channel Matching Constraint
Shortest Path with Wavelength Assignment
Bus Transfer Problem

### 抽象描述

已知一个拓扑图 $G (V, E)$, 若干中继 $R_i \in V$, 每条边上的时间开销和支持的通道.
对于路径经过的每一条边, 必须选择一个通道作为通过该边的途径.
路径上相邻的两条边 $l_1$ 和 $l_2$ 之间的节点如果不是中继, 则 $l_1$ 与 $l_2$ 选择的通道必须相同.
否则 $l_1$ 与 $l_2$ 可以选择任意通道, 但通道不匹配需要切换时会产生额外的开销.
要求给出一条从起点到终点的时间最短的路径.

### 应用场景

* 光纤网络中的波长选择与信号传输路由
* 只能在公交站换乘的路由
* 只能在车站附近变轨的列车线路规划
* 只能在特定枢纽变道的公路交通系统中的车辆路由

### 扩展

* 所求路径必须为简单路径.
* 切换通道没有额外开销, 但将优化目标分为两个部分, 首先是最小化切换通道次数, 在此基础上最小化时间开销.
* 在原优化目标的基础上要求使用的通道数.
* 拥有同一个通道的边构成一条单链.
